<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>3data-sheets</title>
	<script src="x3dom/x3dom-181.js"></script>
	<link rel="stylesheet" href="x3dom/x3dom.css">
	<link rel="shortcut icon" href="assets/fav.ico" type="image/x-icon">

	<style>
		body,
		html,
		x3d {
			border: none;
			margin: 0px;
			padding: 0px;
			width: 100%;
			height: 100%;
			overflow: hidden;
		}

		#messages {
			position: absolute;
			bottom: 0%;
			left: 0px;
			padding: 10px;
			font-family: monospace;
			font-size: 60px;
		}
	</style>
</head>


<body>
	<x3d PrimitiveQuality='Low' disableDoubleClick="true">
		<scene>
			<DirectionalLight direction='0 -1 4' intensity='1' color='1 1 1'></DirectionalLight>
			<DirectionalLight direction='0 -1 -4' intensity='.5' color='1 1 1'></DirectionalLight>
			<Viewpoint position="0 3 10" orientation="0 0 0 0" centerOfRotation="0 0 0" fieldOfView="1"></Viewpoint>
			<navigationInfo type='"examin"' headlight='false' speed='5' avatarSize='20'></navigationInfo>

			<Transform translation='0 0 0'>
				<inline url='assets/olfa.x3d' />
			</Transform>
			<Transform translation='0 4 0' scale="2 2 2">
				<inline id="icInline" url='assets/dip14.x3d' />
			</Transform>
			<Background skyColor='0.1 0.1 0.5, 0.5 0.7 0.9, 0.9 0.9 1' skyAngle='0.9, 1.5' />
		</scene>
	</x3d>

	<div id="messages"></div>
	<script>
		const icChips = [
			{
				name: "NE555",
				type: "Timer IC",
				pins: [
					{ number: 1, name: "GND", function: "Ground" },
					{ number: 2, name: "TRIG", function: "Trigger" },
					{ number: 3, name: "OUT", function: "Output" },
					{ number: 4, name: "RESET", function: "Reset" },
					{ number: 5, name: "CTRL", function: "Control Voltage" },
					{ number: 6, name: "THRS", function: "Threshold" },
					{ number: 7, name: "DISCH", function: "Discharge" },
					{ number: 8, name: "VCC", function: "Supply Voltage" }
				],
				voltageRange: "4.5V - 15V",
				package: "DIP-8",
				applications: ["Timers", "Pulse Generation", "Oscillators"]
			},
			{
				name: "LM358",
				type: "Operational Amplifier",
				pins: [
					{ number: 1, name: "OUT1", function: "Op-Amp 1 Output" },
					{ number: 2, name: "IN1-", function: "Op-Amp 1 Inverting Input" },
					{ number: 3, name: "IN1+", function: "Op-Amp 1 Non-Inverting Input" },
					{ number: 4, name: "GND", function: "Ground" },
					{ number: 5, name: "IN2+", function: "Op-Amp 2 Non-Inverting Input" },
					{ number: 6, name: "IN2-", function: "Op-Amp 2 Inverting Input" },
					{ number: 7, name: "OUT2", function: "Op-Amp 2 Output" },
					{ number: 8, name: "VCC", function: "Supply Voltage" }
				],
				voltageRange: "3V - 32V",
				package: "DIP-8",
				applications: ["Signal Amplification", "Active Filters"]
			}
		];

		let textbox = document.getElementById('messages');

		function handlePinClick(pin, elemnt) {
			let icName = "NE555";
			let targetedIc = icChips.find(ic => ic.name === icName);

			let message = `
			${targetedIc.name} <br> 
			${targetedIc.pins[pin - 1].name}<br>
			${targetedIc.pins[pin - 1].function}
			`;
			textbox.innerHTML = message;

			elemnt.getElementsByTagName('Material')[0].setAttribute('diffuseColor', `0 1 0`)
			setTimeout(() => {
				elemnt.getElementsByTagName('Material')[0].
					setAttribute('diffuseColor', "0.82 0.82 0.78")
			}, 500)
		}
		console.log(document.getElementById("icInline"));
		// document.getElementById("icInline").setAttribute("url", 'assets/dip16.x3d')


		// document.querySelector("inline").setAttribute("url", "/assets/dip20.x3d")
		// console.log(document.querySelector("inline").getAttribute("url"));


	</script>

</body>

</html>

<!-- // if (document.getElementById("sound").getAttribute('enabled') == "false")
// document.getElementById("sound").setAttribute('enabled', 'true');
// else
// document.getElementById("sound").setAttribute('enabled', 'false'); -->