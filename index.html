<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>3data-sheets</title>
	<script src="x3dom/x3dom-181.js"></script>
	<link rel="stylesheet" href="x3dom/x3dom.css">
	<link rel="shortcut icon" href="assets/fav.ico" type="image/x-icon">

	<style>
		body,
		html,
		x3d {
			border: none;
			margin: 0px;
			padding: 0px;
			width: 100%;
			height: 100%;
			overflow: hidden;
		}

		#messages {
			position: absolute;
			padding: 10px;
			font-family: monospace;
			font-size: 50px;
			z-index: 10;
			left: 50px;
			bottom: 5%;
		}
	</style>
</head>


<body>
	<x3d PrimitiveQuality='Low' disableDoubleClick="true">
		<scene>
			<DirectionalLight direction='0 -1 4' intensity='1' color='1 1 1'></DirectionalLight>
			<DirectionalLight direction='0 -1 -4' intensity='.5' color='1 1 1'></DirectionalLight>
			<Viewpoint position="0 3 10" orientation="0 0 0 0" centerOfRotation="0 0 0" fieldOfView="1"></Viewpoint>
			<navigationInfo type='"examin"' headlight='false' speed='5' avatarSize='20'></navigationInfo>

			<Transform translation='0 0 0'>
				<inline url='assets/olfa.x3d' />
			</Transform>
			<Transform translation='0 4 0' scale="2 2 2">
				<inline id="icInline" />
			</Transform>
			<Transform translation='4 12 -25' scale="7 7 7" rotation='0 0 0 -1.5708'>
				<Shape>
					<Appearance>
						<Material diffuseColor='1 1 1'></Material>
					</Appearance>
					<Text id="textElemnt" string='' solid='true' maxExtent='0.0' lit='true'>
						<FontStyle family="MONOSPACE" justify='"MIDDLE" "MIDDLE"' size='0.6' spacing='.8'>
						</FontStyle>
					</Text>
				</Shape>
			</Transform>
			<Background skyColor='0.1 0.1 0.5, 0.5 0.7 0.9, 0.9 0.9 1' skyAngle='0.9, 1.5' />
		</scene>

	</x3d>

	<div id="messages"></div>
	<script>
		const icChips = [
			{
				name: "NE555",
				type: "Timer IC",
				pins: [
					{ number: 1, name: "GND", function: "Ground" },
					{ number: 2, name: "TRIG", function: "Trigger" },
					{ number: 3, name: "OUT", function: "Output" },
					{ number: 4, name: "RESET", function: "Reset" },
					{ number: 5, name: "CTRL", function: "Control Voltage" },
					{ number: 6, name: "THRS", function: "Threshold" },
					{ number: 7, name: "DISCH", function: "Discharge" },
					{ number: 8, name: "VCC", function: "Supply Voltage" }
				],
				voltageRange: "4.5V - 15V",
				applications: ["Timers", "Pulse Generation", "Oscillators"]
			},
			{
				name: "LM358",
				type: "Operational Amplifier",
				pins: [
					{ number: 1, name: "OUT1", function: "Op-Amp 1 Output" },
					{ number: 2, name: "IN1-", function: "Op-Amp 1 Inverting Input" },
					{ number: 3, name: "IN1+", function: "Op-Amp 1 Non-Inverting Input" },
					{ number: 4, name: "GND", function: "Ground" },
					{ number: 5, name: "IN2+", function: "Op-Amp 2 Non-Inverting Input" },
					{ number: 6, name: "IN2-", function: "Op-Amp 2 Inverting Input" },
					{ number: 7, name: "OUT2", function: "Op-Amp 2 Output" },
					{ number: 8, name: "VCC", function: "Supply Voltage" }
				],
				voltageRange: "3V - 32V",
				applications: ["Signal Amplification", "Active Filters"]
			}
		];

		function whatPackage(icPins) {
			let package = `DIP-${icPins.length}`
			return package;
		}

		icChips.forEach(chip => {
			chip.package = whatPackage(chip.pins);
		});

		let textbox = document.getElementById('messages');

		let icName = "NE555";
		let targetedIc = icChips.find(ic => ic.name === icName);
		let textElemnt = document.getElementById("textElemnt")
		textElemnt.setAttribute("string", `${targetedIc.name}`)
		function handlePinClick(pin, elemnt) {
			let message = `
			${targetedIc.name}
			${targetedIc.pins[pin - 1].number}
			${targetedIc.pins[pin - 1].name}
			${targetedIc.pins[pin - 1].function}
			`;
			textElemnt.setAttribute("string", message)
			// textbox.innerHTML = message;

			elemnt.getElementsByTagName('Material')[0].setAttribute('diffuseColor', `0 1 0`)
			setTimeout(() => {
				elemnt.getElementsByTagName('Material')[0].
					setAttribute('diffuseColor', "0.82 0.82 0.78")
				// textbox.innerHTML = "";
			}, 1000)
		}

		let icInlineElemnt = document.getElementById("icInline");
		icInlineElemnt.setAttribute("url", `assets/${targetedIc.package}.x3d`)

		// document.querySelector("body").addEventListener("mousemove", (event) => {
		// 	textbox.style.left = `${event.clientX + 10}px`;
		// 	textbox.style.top = `${event.clientY + 10}px`;
		// });
	</script>

</body>

</html>